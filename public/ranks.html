<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Art Club | Art Rank</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<header class="navbar">
  <h1 class="logo">Art Club</h1>
  <ul class="nav-links">
    <li><a href="index.html">Home</a></li>
    <li><a href="about.html">About</a></li>
    <li><a href="events.html">Events</a></li>
    <li><a href="latest-announcements.html">Announcement</a></li>
    <li><a href="questions.html">Questions</a></li>
    <li><a href="hall_of_fame.html">Hall of Fame</a></li>
    <li><a href="canvas.html">Collaborative Canvas</a></li>
    <li><a href="ranks.html">Art Rank</a></li>
  </ul>
</header>

<section class="page-content">
  <h2>Art Rank System</h2>
  <p>Every user starts as <strong>Beginner</strong>. Creators can promote users based on their art skills.</p>

  <table id="rank-table" border="1" cellpadding="8" cellspacing="0">
    <thead>
      <tr>
        <th>Username</th>
        <th>Rank</th>
        <th>Action (Creator Only)</th>
      </tr>
    </thead>
    <tbody>
      <!-- Users will appear here dynamically -->
    </tbody>
  </table>
</section>

<script>
const currentUser = JSON.parse(localStorage.getItem("currentUser"));
if(!currentUser) window.location.href = "signup.html";

const users = JSON.parse(localStorage.getItem("users") || "[]");
const rankTableBody = document.querySelector("#rank-table tbody");

// Render all users in the table
function renderUsers() {
    rankTableBody.innerHTML = "";
    users.forEach((user, index) => {
        const tr = document.createElement("tr");

        tr.innerHTML = `
            <td>${user.username}</td>
            <td>${user.rank || "Beginner"}</td>
            <td>${currentUser.rank === "creator" && user.rank !== "creator" ? `<button onclick="promoteUser(${index})">Promote</button>` : ""}</td>
        `;
        rankTableBody.appendChild(tr);
    });
}

// Promote a user (creator only)
function promoteUser(index) {
    if(currentUser.rank !== "creator") return;

    const user = users[index];
    if(user.rank === "Beginner") user.rank = "Intermediate";
    else if(user.rank === "Intermediate") user.rank = "Advanced";
    else if(user.rank === "Advanced") user.rank = "Master";

    localStorage.setItem("users", JSON.stringify(users));
    renderUsers();
}

renderUsers();
</script>

</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Art Club | Art Ranks</title>
<link rel="stylesheet" href="style.css">
<style>
  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
  }

  th, td {
    padding: 12px;
    text-align: left;
    border-bottom: 1px solid #ccc;
  }

  button {
    padding: 6px 12px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    background: #00796b;
    color: white;
    transition: 0.2s;
  }

  button:hover {
    background: #004d40;
  }

  .rank-badge {
    padding: 4px 8px;
    border-radius: 12px;
    color: white;
    font-weight: bold;
  }

  .User { background-color: gray; }
  .Beginner { background-color: blue; }
  .Intermediate { background-color: green; }
  .Advanced { background-color: purple; }
  .Master { background-color: gold; color: black; }
  .creator { background-color: red; }
</style>
</head>
<body>

<header class="navbar">
  <h1 class="logo">Art Club</h1>
  <ul class="nav-links">
    <li><a href="index.html">Home</a></li>
    <li><a href="about.html">About</a></li>
    <li><a href="events.html">Events</a></li>
    <li><a href="latest-announcements.html">Announcement</a></li>
    <li><a href="questions.html">Questions</a></li>
    <li><a href="hall_of_fame.html">Hall of Fame</a></li>
    <li><a href="canvas.html">Collaborative Canvas</a></li>
    <li><a href="ranks.html">Art Rank</a></li>
  </ul>
</header>

<section class="page-content">
  <h2>Art Skill Ranks</h2>
  <p>All new users start as <strong>User</strong>. Creators can promote users to higher art skill ranks.</p>

  <table id="rank-table">
    <thead>
      <tr>
        <th>Username</th>
        <th>Rank</th>
        <th>Action (Creator Only)</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</section>

<script>
// Get current user
const currentUser = JSON.parse(localStorage.getItem("currentUser"));
if(!currentUser) window.location.href = "signup.html";

// Get all users
const users = JSON.parse(localStorage.getItem("users") || "[]");

// Ensure every user has a rank
users.forEach(u => {
    if(!u.rank) u.rank = "User"; // default starting rank
});
localStorage.setItem("users", JSON.stringify(users));

const rankTableBody = document.querySelector("#rank-table tbody");

// Render users in the table
function renderUsers() {
    rankTableBody.innerHTML = "";

    users.forEach((user, index) => {
        const tr = document.createElement("tr");

        // Add colored badge for the rank
        const rankBadge = `<span class="rank-badge ${user.rank}">${user.rank}</span>`;

        tr.innerHTML = `
            <td>${user.username}</td>
            <td>${rankBadge}</td>
            <td>
                ${
                    currentUser.rank === "creator" && user.rank !== "creator" 
                    ? `<button onclick="promoteUser(${index})">Promote</button>` 
                    : ""
                }
            </td>
        `;
        rankTableBody.appendChild(tr);
    });
}

// Promote user through ranks
function promoteUser(index) {
    if(currentUser.rank !== "creator") return;

    const user = users[index];

    switch(user.rank) {
        case "User":
            user.rank = "Beginner";
            break;
        case "Beginner":
            user.rank = "Intermediate";
            break;
        case "Intermediate":
            user.rank = "Advanced";
            break;
        case "Advanced":
            user.rank = "Master";
            break;
        case "Master":
            alert(`${user.username} is already at the highest rank!`);
            return;
    }

    localStorage.setItem("users", JSON.stringify(users));
    renderUsers();
}

// Initial render
renderUsers();
</script>

</body>
</html>

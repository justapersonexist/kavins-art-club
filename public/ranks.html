<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Art Club | Art Ranks</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<header class="navbar">
  <h1 class="logo">Art Club</h1>
  <ul class="nav-links">
    <li><a href="index.html">Home</a></li>
    <li><a href="about.html">About</a></li>
    <li><a href="events.html">Events</a></li>
    <li><a href="latest-announcements.html">Announcement</a></li>
    <li><a href="questions.html">Questions</a></li>
    <li><a href="hall_of_fame.html">Hall of Fame</a></li>
    <li><a href="canvas.html">Collaborative Canvas</a></li>
    <li><a href="ranks.html">Art Rank</a></li>
  </ul>
</header>

<section class="page-content">
  <h2>Art Skill Ranks</h2>
  <p>All users start as <strong>Beginner</strong>. Creators can promote users based on their art skills.</p>

  <table id="rank-table" border="1" cellpadding="8" cellspacing="0">
    <thead>
      <tr>
        <th>Username</th>
        <th>Rank</th>
        <th>Action (Creator Only)</th>
      </tr>
    </thead>
    <tbody>
      <!-- Users will populate here -->
    </tbody>
  </table>
</section>

<script>
const currentUser = JSON.parse(localStorage.getItem("currentUser"));
if(!currentUser) window.location.href = "signup.html";

const users = JSON.parse(localStorage.getItem("users") || "[]");

// Ensure every user has a rank (default Beginner)
users.forEach(u => {
    if(!u.rank) u.rank = "Beginner";
});
localStorage.setItem("users", JSON.stringify(users));

const rankTableBody = document.querySelector("#rank-table tbody");

function renderUsers() {
    rankTableBody.innerHTML = "";

    users.forEach((user, index) => {
        const tr = document.createElement("tr");

        tr.innerHTML = `
            <td>${user.username}</td>
            <td>${user.rank}</td>
            <td>
                ${currentUser.rank === "creator" && user.rank !== "creator" ? `<button onclick="promoteUser(${index})">Promote</button>` : ""}
            </td>
        `;
        rankTableBody.appendChild(tr);
    });
}

// Promotion logic: Beginner → Intermediate → Advanced → Master
function promoteUser(index) {
    if(currentUser.rank !== "creator") return;

    const user = users[index];

    switch(user.rank) {
        case "Beginner":
            user.rank = "Intermediate";
            break;
        case "Intermediate":
            user.rank = "Advanced";
            break;
        case "Advanced":
            user.rank = "Master";
            break;
        case "Master":
            alert(`${user.username} is already at the highest rank!`);
            return;
    }

    localStorage.setItem("users", JSON.stringify(users));
    renderUsers();
}

renderUsers();
</script>

</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Art Club | Rank System</title>

<style>
/* ---------- STYLING (MORE COLORFUL, NICE, MODERN) ---------- */
body {
    font-family: Arial, sans-serif;
    margin:0;
    padding:0;
    background: linear-gradient(135deg, #fbe9e7, #e1f5fe);
}

/* Navbar */
.navbar {
    background: linear-gradient(90deg, #7b1fa2, #3949ab);
    color:#fff;
    display:flex;
    justify-content:space-between;
    padding:15px 25px;
    align-items:center;
    flex-wrap: wrap;
    box-shadow:0 3px 10px rgba(0,0,0,0.2);
}
.navbar a {
    color:#fff;
    text-decoration:none;
    margin-left:20px;
    font-weight: bold;
    transition:0.2s;
}
.navbar a:hover {
    color:#ffeb3b;
}
.navbar button {
    padding:8px 15px;
    cursor:pointer;
    background:#ff7043;
    color:white;
    border:none;
    border-radius:12px;
    transition: background 0.2s, transform 0.2s;
}
.navbar button:hover {
    background:#ff5722;
    transform: scale(1.05);
}

/* Page content */
section {
    padding:30px;
}
h2 {
    color:#303f9f;
    font-size:28px;
}

/* Table */
table {
    width:100%;
    border-collapse:collapse;
    margin-top:20px;
    background:#ffffffdd;
    backdrop-filter: blur(5px);
    border-radius:10px;
    overflow:hidden;
    box-shadow:0 5px 15px rgba(0,0,0,0.2);
}
th {
    background:#3949ab;
    color:white;
    padding:12px;
}
td {
    padding:12px;
    border-bottom:1px solid #ccc;
}

/* Promote button */
button.promote {
    padding:6px 12px;
    cursor:pointer;
    background:#ff9800;
    border:none;
    border-radius:6px;
    color:#fff;
    font-weight:bold;
    transition: all 0.2s;
}
button.promote:hover {
    background:#fb8c00;
    transform: scale(1.1);
}

/* Fade-in effect */
tr {
    animation: fadeIn 0.4s ease-in-out;
}
@keyframes fadeIn {
    from {opacity:0; transform: translateY(5px);}
    to {opacity:1; transform: translateY(0);}
}
</style>
</head>

<body>

<header class="navbar">
    <h1 class="logo">ðŸŽ¨ Art Club</h1>
    <div>
        <a href="index.html">Home</a>
        <a href="latest-announcements.html">Announcements</a>
        <a href="rank.html">Ranks</a>
        <button id="logout-btn">Logout</button>
    </div>
</header>

<section>
<h2>Member Rank System</h2>
<p>Only the creator can promote users to higher ranks.</p>

<table id="users-table">
    <thead>
    <tr>
        <th>Username</th>
        <th>Rank</th>
        <th>Promote</th>
    </tr>
    </thead>
    <tbody></tbody>
</table>
</section>

<script>
// -------------------- LOGIN CHECK --------------------
const currentUser = JSON.parse(localStorage.getItem("currentUser"));
if(!currentUser) window.location.href = "signup.html";

const CREATOR_USERNAME = "justapersonexist";

function isCreator(user) {
    return user.rank === "creator" || user.username === CREATOR_USERNAME;
}

document.getElementById("logout-btn").addEventListener("click", ()=>{
    localStorage.removeItem("currentUser");
    window.location.href = "login.html";
});

// -------------------- LOAD USERS --------------------
function loadUsers() {
    const users = JSON.parse(localStorage.getItem("users") || "[]");
    const tbody = document.querySelector("#users-table tbody");
    tbody.innerHTML = "";

    users.forEach((user, index)=>{
        const tr = document.createElement("tr");
        tr.innerHTML = `
            <td>${user.username}</td>
            <td>${user.rank || "Beginner"}</td>
            <td>
                ${
                    currentUser.username === CREATOR_USERNAME && 
                    user.username !== CREATOR_USERNAME
                    ? `<button class="promote" onclick="promoteUser(${index})">Promote</button>`
                    : "-"
                }
            </td>
        `;
        tbody.appendChild(tr);
    });
}

// -------------------- PROMOTE USER --------------------
function promoteUser(index){
    const users = JSON.parse(localStorage.getItem("users") || "[]");
    const user = users[index];

    const ranks = ["Beginner", "Intermediate", "Advanced", "Master"];
    let currentRankIndex = ranks.indexOf(user.rank || "Beginner");

    if(currentRankIndex < ranks.length - 1){
        user.rank = ranks[currentRankIndex + 1];
        users[index] = user;
        localStorage.setItem("users", JSON.stringify(users));
        alert(`${user.username} promoted to ${user.rank}!`);
        loadUsers();
    } else {
        alert(`${user.username} is already at the highest rank!`);
    }
}

// -------------------- INIT --------------------
loadUsers();
</script>

</body>
</html>
